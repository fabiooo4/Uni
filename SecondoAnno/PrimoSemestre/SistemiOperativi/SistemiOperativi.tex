\documentclass[a4paper]{article}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{textcomp}
\usepackage[italian]{babel}
\usepackage{amsmath, amssymb}
\usepackage{booktabs,xltabular}
\usepackage{amsfonts}
\usepackage{cancel}
\usepackage{mdframed}
\usepackage{makecell}
\usepackage{float}
\usepackage{xcolor}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{tikz}
\usetikzlibrary{shapes, arrows, automata, petri, decorations.pathreplacing, positioning, calc}
\usepackage{circuitikz}
\usepackage[label=corner]{karnaugh-map}
\graphicspath{{./figures/}}

\usepackage{ntheorem}
\newtheorem{theorem}{Teorema}

\usepackage{import}
\usepackage{pdfpages}
\usepackage{transparent}
\usepackage{xcolor}

\usepackage{hyperref}
\hypersetup{
    colorlinks=false,
}

% Code blocks
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.95}

\lstdefinestyle{mystyle}{
	backgroundcolor=\color{backcolour},
	commentstyle=\color{codegreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{codegray},
	stringstyle=\color{codepurple},
	basicstyle=\ttfamily\footnotesize,
	breakatwhitespace=false,
	breaklines=true,
	captionpos=b,
	keepspaces=true,
	numbers=left,
	numbersep=5pt,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	tabsize=2
}

\lstset{style=mystyle}

\usepackage{color}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=tb,
	aboveskip=3mm,
	belowskip=3mm,
	showstringspaces=false,
	columns=flexible,
	basicstyle={\small\ttfamily},
	numbers=none,
	numberstyle=\tiny\color{gray},
	keywordstyle=\color{blue},
	commentstyle=\color{dkgreen},
	stringstyle=\color{mauve},
	breaklines=true,
	breakatwhitespace=true,
	tabsize=3
}

\usepackage{import}
\usepackage{pdfpages}
\usepackage{transparent}
\usepackage{xcolor}



% Useful definitions frame
\theoremstyle{break}
\theoremheaderfont{\bfseries}
\newmdtheoremenv[%
	linecolor=gray,leftmargin=0,%
	rightmargin=0,
	innertopmargin=8pt,%
	innerbottommargin=8pt,
	ntheorem]{define}{Definizioni utili}[section]

% Example frame
\theoremstyle{break}
\theoremheaderfont{\bfseries}
\newmdtheoremenv[%
	linecolor=gray,leftmargin=0,%
	rightmargin=0,
	innertopmargin=8pt,%
	innerbottommargin=8pt,
	ntheorem]{example}{Esempio}[section]

% Important definition frame
\theoremstyle{break}
\theoremheaderfont{\bfseries}
\newmdtheoremenv[%
	linecolor=gray,leftmargin=0,%
	rightmargin=0,
	backgroundcolor=gray!40,%
	innertopmargin=8pt,%
	innerbottommargin=8pt,
	ntheorem]{definition}{Definizione}[section]

% Exercise frame
\theoremstyle{break}
\theoremheaderfont{\bfseries}
\newmdtheoremenv[%
	linecolor=gray,leftmargin=0,%
	rightmargin=0,
	innertopmargin=8pt,%
	innerbottommargin=8pt,
	ntheorem]{exercise}{Esercizio}[section]

% figure support
\usepackage{import}
\usepackage{xifthen}
\pdfminorversion=7
\usepackage{pdfpages}
\usepackage{transparent}
\newcommand{\incfig}[1]{%
	\def\svgwidth{\columnwidth}
	\import{./figures/}{#1.pdf_tex}
}

% FSM tikz
\tikzset{
    place/.style={
        circle,
        thick,
        draw=black,
        minimum size=6mm,
    },
        state/.style={
        circle,
        thick,
        draw=blue!75,
        fill=blue!20,
        minimum size=6mm,
    },
}

\pdfsuppresswarningpagegroup=1

\begin{document}

\input{title.tex}

\tableofcontents
\pagebreak

% Info:
\section{Introduzione}
Il sistema operativo \textbf{UNIX} deriva dal \textbf{MULTIX} e da UNIX sono
derivati tutti gli altri sistemi operativi odierni, tra cui \textbf{Linux} e
\textbf{MacOS}.

\subsection{Algoritmi}
Non esiste una definizione rigorosa di algoritmo, ma ne esiste una informale degli
algoritmi sequenziali
\begin{figure}[H]
  \begin{definition}
    Chiamiamo algoritmo un insieme finito \( P \) di istruzioni per le quali esiste
    una macchina \( M \) capace di interpretare ed eseguire le istruzioni di \( P \) t.c.
    \begin{enumerate}
      \item \( M \) ha a disposizione una memoria illimitata per i risultati intermedi

      \item In un tempo finito \( M \) può effettuare solamente un numero finito di
        passi di calcolo (si dice che \( M \) calcola in modo \textbf{discreto})
        
      \item Il calcolo da parte di \( M \) avviene in modo deterministico
        
      \item La dimensione dei dati manipolabili da \( M \) è finita ma non limitata.
    \end{enumerate}
  \end{definition}
\end{figure}

\noindent
Per esegiure gli algoritmi serve un linguaggio di programmazione e per interpretarli
c'è bisogno di un \textbf{interprete}. Il compito dell'interprete è eseguire programmi
scritti nel linguaggio \( L \); a tal fine defe essere in grado di decodificare
e valutare istruzioni scritte nel linguaggio \( L \).

\section{Sistema Operativo}
Il \textbf{sistema operativo} è il livello del software che si pone tra l'hardware
e gli utenti. E quindi il sistema operativo incapsula la macchina fisica.
Per mettere in comunicazione l'utente e l'hardware ci sono le interfacce utente,
che si dividono in:
\begin{enumerate}
  \item \textbf{GUI}
  \item \textbf{Touch screen}
  \item \textbf{Command line}
\end{enumerate}

\noindent
Il sistema operativo fornisce dei servizi per comunicare con l'hardware e questi
servizi possono essere usati tramite delle \textbf{system calls}. Questi servizi
sono ad esempio:

\begin{itemize}
  \item Esecuzione dei programmi
  \item Gestione dei file
  \item Operazioni I/O
  \item Gestione degli errori
  \item Comunicazione
\end{itemize}

\noindent
L'unico programma che è sempre in esecuzione su un computer è il \textbf{kernel}.

\subsection{Operazioni}
\begin{itemize}
  \item \textbf{Bootstrap program}: è una piccola porzione di codice che inizializza
    il sistema e carica il kernel

  \item Viene caricato il kernel

  \item Vengono caricati i \textbf{system daemons}, cioè dei servizi forniti al
    di fuori del kernel

  \item Gestione delle chiamate di sistema:
    \begin{itemize}
      \item Hardware interrupt
      \item Software interrupt
    \end{itemize}
\end{itemize}

\noindent
Su un computer vengono eseguiti più programmi alla volta salvando la coda dei
processi da eseguire in memoria e lo \textbf{scheduler} si occupa di gestire
l'ordine di esecuzione e di interruzione. Per permettere di eseguire più processi
alla volta si utilizza il \textbf{time sharing}, cioè la CPU cambia processo così
frequentemente che si crea l'illusione che i processi vengano eseguiti in parallelo
anche se in realtà non è così.

\section{Modalità di esecuzione}
Il sistema operativo può eseguire il codice in 2 modalità:
\begin{enumerate}
  \item \textbf{Modalità utente}: il codice viene eseguito in modo normale
  \item \textbf{Modalità kernel}: il codice viene eseguito con privilegi speciali
    che permettono di accedere all'hardware
\end{enumerate}

\noindent
Per capire in che modalità si sta eseguendo il codice si utilizza un bit nel
\textbf{program status word} (PSW) che indica la modalità di esecuzione chiamato
\textbf{mode bit}.

\noindent Si può entrere in modalità kernel tramite:
\begin{enumerate}
  \item \textbf{Nuovo processo}: Per creare un nuovo processo, il kernel copia il
    programma nella memoria, setta il program counter alla prima istruzione del
    processo e setta lo stack pointer alla base dello stack del processo e infine
    si torna in modalità utente. 

    \item \textbf{Ritorno da un interrupt o system call}: Quando il kernel finisce
      di gestire la richiesta, riprende l'esecuzione del processo che ha chiamato
      l'interrupt o la system call e torna in modalità utente.
      
    \item \textbf{Cambio di contesto}: Quando il kernel decide di cambiare il
      processo in esecuzione, salva lo stato del processo corrente e carica lo
      stato del nuovo processo e torna in modalità utente.
\end{enumerate}

\noindent
Per prevenire che un processo faccia un ciclo infinito esiste un timer che interrompe
il processo se viene eseguito per troppo tempo.

\subsection{Protezione e sicurezza}
\begin{enumerate}
  \item \textbf{Protezione}: qualsiasi meccanismo per controllare l'accesso dei
    processi o degli utenti alle risorse del sistema.

  \item \textbf{Sicurezza}: protezione da accessi esterni non autorizzati.
\end{enumerate}

\noindent
Ogni utente è identificato da un \textbf{user id} e ogni utente può far parte di
un gruppo, identificato da un \textbf{group id}. Ogni file ha un \textbf{owner} e
un \textbf{group owner} e per ogni file ci sono 3 tipi di permessi:
\begin{enumerate}
  \item \textbf{Read}
  \item \textbf{Write}
  \item \textbf{Execute}
\end{enumerate}


\end{document}
